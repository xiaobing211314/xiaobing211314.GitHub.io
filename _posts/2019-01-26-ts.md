---
layout:	post
title: 浅谈.ts文件的抓取和合并
date: 2019-01-26
tags: web
categories: IT
---



> 看到一个好看的片子便想下载下来，奈何实力有限只抓到了.ts文件，于是便有了下面的折腾。   
 <!--more--> 
#### 1.  .ts文件的获得

   我这个视频是从某花影视app里面抓的（因为想看高清的*我想吃掉你的胰脏*）。

首先需要下载抓包软件，我这里下载的是抓包精灵app。具体抓包过程不再描述。
 <!-- more --> 
![S81231-163559 (已调整大小).png](https://i.loli.net/2019/01/07/5c322c604df97.jpg)

抓到http复制过来既是.ts文件。抓个开头和结尾就大概知道有多少个.ts段了。然后用下载工具批量下载如下图。

![Snipaste_2018-12-31_16-25-54.png](https://i.loli.net/2019/01/07/5c322d2840241.jpg)

![Snipaste_2018-12-31_16-27-33.png](https://i.loli.net/2019/01/07/5c322d4eeaa47.jpg)

#### 2. 合并.ts文件

接下来是合并，用批处理即可合并具体命令是

`copy /b  D:\f\*.ts  D:\f\new.ts`

![Snipaste_2018-12-31_17-06-06.png](https://i.loli.net/2019/01/07/5c322dd02f9e3.jpg)

这样就会在指定目录下得到一个new.ts文件。

------

#### PS：关于ts文件合并的补充

今天本来想把UC浏览器缓存的视频导出传到OD里，奈何发现视频是m3u8，里面全是.ts文件。我首先想到的是用bat合并，可是发现全是没有后缀的.ts文件。我得先把这些文件批量重命名。几百个ts文件干脆用Excel+bat来重命名的。首先把0到几百的无文件类型的文件重命名为0.ts到几百.ts。**后来发现cmd里是按照字符串排序的，直接合并顺序就乱了，所有又用Excel把1.ts之类的命名为001.ts**

![Snipaste_2019-01-07_00-13-20.png](https://i.loli.net/2019/01/07/5c32341441038.jpg)

把D表格里面的复制出来做成bat运行即可重命名。然后再用copy命令合并即可。当然如果要获取所有文件的名称也可以用`dir *.* /b>rename.xls`来获取。

当我这样做完之后发现不用把0文件批量重命名为0.ts文件。直接`copy /b  D:\1\2\*.* D:\1\2\new.ts`即可。



